{"remainingRequest":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\Vue\\NEW\\vue-spas-master\\src\\views\\donor\\EditProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\src\\views\\donor\\EditProfile.vue","mtime":1616876717543},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport firebase from \"firebase\";\r\n  \r\nexport default {\r\n    data() {\r\n        return {\r\n            user: null,\r\n            userData:null,\r\n           firstName:null,\r\n            lastName:null,\r\n            city:this.city,\r\n            bloodType:null,\r\n            bloodFactor:null,\r\n            age:null,\r\n            telephone:null,\r\n        };\r\n    },\r\n    created() {\r\n        const db = firebase.firestore();\r\n        db.collection('users').where('user_id', '==', firebase.auth().currentUser.uid)\r\n        .get()\r\n        .then((querySnapshot) => {\r\n            \r\n            querySnapshot.forEach((doc) => {\r\n                console.log(doc.id, ' => ', doc.data())\r\n                this.firstName = doc.data().firstName\r\n                this.lastName = doc.data().lastName,\r\n                this.age = doc.data().age,\r\n                this.bloodFactor = doc.data().bloodFactor,\r\n                this.bloodType = doc.data().bloodType,\r\n                this.city = doc.data().city,\r\n                this.telephone = doc.data().telephone              \r\n            })\r\n        })\r\n\r\n        console.log(this.firstName, this.lastName)\r\n        // const db = firebase.firestore();\r\n        //  db.collection('users').doc(firebase.auth().currentUser.uid).\r\n        //         onSnapshot(function(doc){\r\n\r\n        //             console.log('current data:', doc.data())\r\n\r\n        //               var newData = doc.data()\r\n\r\n        //             this.profileData = newData;\r\n\r\n        //           })\r\n            \r\n    },\r\n    methods:{\r\n        updateUserInfo(){\r\n            const db = firebase.firestore();\r\n             db.collection('users').where('user_id', '==', firebase.auth().currentUser.uid).get().then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    doc.ref.update({\r\n                    firstName: this.firstName,\r\n                    lastName: this.lastName,\r\n                    age: this.age,\r\n                    bloodFactor: this.bloodFactor,\r\n                    city: this.city,\r\n                    telephone: this.telephone\r\n                })\r\n                .then(() => {\r\n                    console.log('update successfull')\r\n                });\r\n            })\r\n            })\r\n        },\r\n        deleteUserInfo(){\r\n            console.log('delete')\r\n             const db = firebase.firestore();\r\n            var user = firebase.auth().currentUser;\r\n            //delete user data in firestore\r\n            db.collection('users').where('user_id', '==', user.uid).get().then((querySnapshot) => {\r\n            querySnapshot.forEach((doc) => {\r\n              doc.ref.delete();\r\n              console.log('data in firestore is deleted')\r\n            })\r\n          })\r\n             \r\n            //delete authenticated user\r\n            user.delete().then(function() {\r\n                console.log('user is deleted')\r\n                \r\n                 this.$router.push(\"/\");   \r\n            }).catch(function(error) {\r\n                console.log(error)\r\n            });\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["EditProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditProfile.vue","sourceRoot":"src/views/donor","sourcesContent":["<template>\r\n    <div>\r\n        Hello {{this.firstName + ' ' + this.lastName }} you can edit your profile bellow:\r\n         <form class=\"ui large form\">\r\n            <div class=\"ui stacked secondary segment\">\r\n              \r\n               <!-- <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"mail icon\"></i>\r\n                     <input type=\"text\" name=\"email\" value=\"{{this.email}}\" v-model=\"email\" />\r\n                  </div>\r\n               </div>\r\n               <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <input type=\"password\" name=\"password\" placeholder=\"Password\" v-model=\"password\" />\r\n                  </div>\r\n               </div> -->\r\n               <!-- <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <input type=\"password\" name=\"password\" placeholder=\"Confirm password\" v-model=\"confirmPassword\" />\r\n                  </div>\r\n               </div> -->\r\n          \r\n               <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <input type=\"text\" name=\"firstName\" placeholder=\"First Name\" v-model=\"firstName\" />\r\n                  </div>\r\n               </div>\r\n                <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <input type=\"text\" name=\"lastName\" placeholder=\"Last Name\" v-model=\"lastName\" />\r\n                  </div>\r\n               </div>\r\n               <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"compass icon\"></i>\r\n                     <input type=\"text\" name=\"city\" placeholder=\"City\" v-model=\"city\" />\r\n                  </div>\r\n               </div>\r\n                <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"phone icon\"></i>\r\n                     <input type=\"tel\" name=\"telephone\" placeholder=\"ex. g. +22 111 22 11\" v-model=\"telephone\" />\r\n                  </div>\r\n               </div>\r\n                <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <input type=\"number\" name=\"age\" placeholder=\"Age\" v-model=\"age\" />\r\n                  </div>\r\n               </div>\r\n                 <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     <select v-model=\"bloodType\">\r\n                        <option value=\"0\" selected>0</option>\r\n                        <option value=\"A\">A</option>\r\n                        <option value=\"B\">B</option>\r\n                        <option value=\"AB\">AB</option>\r\n                     </select>\r\n                  </div>\r\n                 </div>\r\n                  <div class=\"field\">\r\n                  <div class=\"ui left icon input large\">\r\n                     <i class=\"lock icon\"></i>\r\n                     Blood factor\r\n                     <select v-model=\"bloodFactor\">\r\n                        <option value=\"-\" selected>-</option>\r\n                        <option value=\"+\">+</option>                        \r\n                     </select>\r\n                  </div>\r\n               </div>\r\n                \r\n              \r\n               <div class=\"ui fluid large green submit button\" @click=\"updateUserInfo\">Update your data</div>\r\n            </div>\r\n           \r\n            <div class=\"ui error message\"></div>\r\n         </form>\r\n         <div>Delete your profile</div>\r\n         <div class=\"ui fluid large red submit button\" @click=\"deleteUserInfo\">deleteUserInfo</div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport firebase from \"firebase\";\r\n  \r\nexport default {\r\n    data() {\r\n        return {\r\n            user: null,\r\n            userData:null,\r\n           firstName:null,\r\n            lastName:null,\r\n            city:this.city,\r\n            bloodType:null,\r\n            bloodFactor:null,\r\n            age:null,\r\n            telephone:null,\r\n        };\r\n    },\r\n    created() {\r\n        const db = firebase.firestore();\r\n        db.collection('users').where('user_id', '==', firebase.auth().currentUser.uid)\r\n        .get()\r\n        .then((querySnapshot) => {\r\n            \r\n            querySnapshot.forEach((doc) => {\r\n                console.log(doc.id, ' => ', doc.data())\r\n                this.firstName = doc.data().firstName\r\n                this.lastName = doc.data().lastName,\r\n                this.age = doc.data().age,\r\n                this.bloodFactor = doc.data().bloodFactor,\r\n                this.bloodType = doc.data().bloodType,\r\n                this.city = doc.data().city,\r\n                this.telephone = doc.data().telephone              \r\n            })\r\n        })\r\n\r\n        console.log(this.firstName, this.lastName)\r\n        // const db = firebase.firestore();\r\n        //  db.collection('users').doc(firebase.auth().currentUser.uid).\r\n        //         onSnapshot(function(doc){\r\n\r\n        //             console.log('current data:', doc.data())\r\n\r\n        //               var newData = doc.data()\r\n\r\n        //             this.profileData = newData;\r\n\r\n        //           })\r\n            \r\n    },\r\n    methods:{\r\n        updateUserInfo(){\r\n            const db = firebase.firestore();\r\n             db.collection('users').where('user_id', '==', firebase.auth().currentUser.uid).get().then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    doc.ref.update({\r\n                    firstName: this.firstName,\r\n                    lastName: this.lastName,\r\n                    age: this.age,\r\n                    bloodFactor: this.bloodFactor,\r\n                    city: this.city,\r\n                    telephone: this.telephone\r\n                })\r\n                .then(() => {\r\n                    console.log('update successfull')\r\n                });\r\n            })\r\n            })\r\n        },\r\n        deleteUserInfo(){\r\n            console.log('delete')\r\n             const db = firebase.firestore();\r\n            var user = firebase.auth().currentUser;\r\n            //delete user data in firestore\r\n            db.collection('users').where('user_id', '==', user.uid).get().then((querySnapshot) => {\r\n            querySnapshot.forEach((doc) => {\r\n              doc.ref.delete();\r\n              console.log('data in firestore is deleted')\r\n            })\r\n          })\r\n             \r\n            //delete authenticated user\r\n            user.delete().then(function() {\r\n                console.log('user is deleted')\r\n                \r\n                 this.$router.push(\"/\");   \r\n            }).catch(function(error) {\r\n                console.log(error)\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>"]}]}