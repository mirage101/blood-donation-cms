{"remainingRequest":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\babel-loader\\lib\\index.js!D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projects\\Vue\\NEW\\vue-spas-master\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\src\\App.vue","mtime":1617222989687},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projects\\Vue\\NEW\\vue-spas-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Header from \"@/components/Header.vue\";\nimport Footer from \"@/components/Footer.vue\";\nimport firebase from \"firebase\";\nimport db from \"./db.js\";\nexport default {\n  name: \"App\",\n  data: function data() {\n    return {\n      user: null,\n      error: null,\n      meetings: [],\n      userstate: false,\n      isAdmin: false,\n      isDriver: false,\n      isDonor: false\n    };\n  },\n  methods: {\n    logout: function logout() {\n      var _this = this;\n\n      firebase.auth().signOut().then(function () {\n        _this.isAdmin = false;\n        _this.isDriver = false;\n        _this.isDonor = false;\n        _this.user = null; //reset user\n\n        _this.$router.push(\"login\"); //reroute to login\n\n      });\n    },\n    checkIn: function checkIn(payload) {\n      var _this2 = this;\n\n      console.log(payload);\n      console.log(payload.user_id);\n      console.log(payload.event_id);\n      db.collection(\"users\").doc(payload.user_id).collection(\"events\").doc(payload.event_id).get().then(function (doc) {\n        if (!doc.exists) {\n          console.log('ima');\n          db.collection(\"users\").doc(payload.user_id).collection(\"events\").doc(payload.event_id).collection(\"donorlist\").set({\n            user_id: payload.user_id,\n            event_id: payload.event_id,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n          }).then(function () {\n            console.log(payload.user_id, payload.event_id);\n\n            _this2.$router.push(\"donor/enlist\");\n          });\n        } else {\n          _this2.error = \"Sorry, no such event\";\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        _this3.userstate = true;\n      } else {\n        _this3.userstate = false;\n      }\n    }); //check user roles\n\n    firebase.auth().onAuthStateChanged(function (userAuth) {\n      if (userAuth) {\n        firebase.auth().currentUser.getIdTokenResult().then(function (tokenResult) {\n          console.log('tokenResult.claims.donor: ' + tokenResult.claims);\n\n          if (tokenResult.claims.admin) {\n            _this3.isAdmin = true;\n          } else if (tokenResult.claims.driver) {\n            _this3.isDriver = true;\n          } else if (tokenResult.claims.donor) {\n            _this3.isDonor = true;\n          }\n\n          console.log(_this3.isAdmin);\n        });\n      }\n    });\n  },\n  components: {\n    Header: Header,\n    Footer: Footer\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <Header\n      :user=\"user\"\n      :userstate=\"userstate\"     \n      :isAdmin=\"isAdmin\"\n      :isDonor=\"isDonor\"\n      :isDriver=\"isDriver\"\n      @logout=\"logout\"\n    />\n    <Footer />\n    <router-view\n      class=\"container\"\n      :user=\"user\"\n      :userstate=\"userstate\"     \n      :isAdmin=\"isAdmin\"\n      :isDonor=\"isDonor\"\n      :isDriver=\"isDriver\"\n      :meetings=\"meetings\"\n      :error=\"error\"\n      @logout=\"logout\"\n      @checkIn=\"checkIn\"\n    />\n  </div>\n</template>\n\n<script>\nimport Header from \"@/components/Header.vue\";\nimport Footer from \"@/components/Footer.vue\";\nimport firebase from \"firebase\";\nimport db from \"./db.js\";\n\nexport default {\n  name: \"App\",\n  data: function() {\n    return {\n      user: null,\n      error: null,\n      meetings: [],\n       userstate:false,\n      isAdmin:false,\n      isDriver: false,\n      isDonor: false\n    };\n  },\n  methods: {\n    logout: function() {\n      firebase.auth()\n        .signOut()\n        .then(() => {\n          this.isAdmin = false;\n          this.isDriver = false;\n          this.isDonor = false;\n          this.user = null; //reset user\n          this.$router.push(\"login\"); //reroute to login\n        });\n    },\n    \n    checkIn: function(payload) {\n      console.log(payload)\n      console.log(payload.user_id)\n      console.log(payload.event_id)\n      db.collection(\"users\")\n        .doc(payload.user_id)        \n        .collection(\"events\")\n        .doc(payload.event_id)\n        .get()\n        .then(doc => {   \n          \n          if (!doc.exists) {\n            console.log('ima')\n            db.collection(\"users\")\n              .doc(payload.user_id)\n              .collection(\"events\")\n              .doc(payload.event_id)\n              .collection(\"donorlist\")\n              .set({\n                user_id: payload.user_id,\n                event_id: payload.event_id,\n                createdAt: firebase.firestore.FieldValue.serverTimestamp()\n              })\n              .then(() =>{\n              console.log(payload.user_id, payload.event_id)\n                this.$router.push(\n                  \"donor/enlist\"\n                )\n                }\n              );\n          } else {\n            this.error = \"Sorry, no such event\";\n          }\n        });\n    }\n  },\n  mounted() {\n    \n    firebase.auth().onAuthStateChanged(user => {\n            if (user) {  \n                this.userstate = true;\n            } else { \n                this.userstate = false;\n            } \n        });\n        \n        //check user roles\n         firebase.auth().onAuthStateChanged(userAuth => {\n            if (userAuth) {\n                firebase\n                    .auth()\n                    .currentUser.getIdTokenResult()\n                    .then(tokenResult => {\n                        console.log('tokenResult.claims.donor: ' + tokenResult.claims)\n                        if(tokenResult.claims.admin){\n                            this.isAdmin = true\n                        }else if(tokenResult.claims.driver){\n                            this.isDriver = true\n                        }else if(tokenResult.claims.donor){\n                            this.isDonor = true\n                        }\n                         console.log(this.isAdmin)\n                    });\n            }         \n          });\n      },\n   \n  \n  components: {\n    Header,\n    Footer\n  }\n};\n</script>\n\n\n<style lang=\"scss\">\n$primary: red;\n@import \"node_modules/bootstrap/scss/bootstrap\";\n.vert-offset-top-2{\n    margin-top: 2em;\n}\n#view-page,\n#new-page{\n  a{\n    margin: 0 1em;\n  }\n}\n.collection{\n  margin:1em 0 2em 0;\n}\n.input-field {\n  margin:0 0 2em 0;\n  label{\n    width: 100%;\n    display: inline-block;\n  }\n}\n.edit-profile{\n  button{\n    margin:1em;\n  }\n}\n</style>\n"],"sourceRoot":"src"}]}